!function(e){e.the7PostLoop=function(t){const n={gridContainer:".sGrid-container",filterContainer:".filter",filterCategories:".filter-categories"},o={inPlaceTemplateEditable:"elementor-in-place-template-editable"};let i,r,a,l,s=e(t),d=s.find(".the7-elementor-widget").first(),f={$gridContainer:d.children(n.gridContainer).first(),$filterContainer:d.children(n.filterContainer).first(),$filterCategories:d.children(n.filterCategories).first()};s.vars={masonryActive:!1,filteradeActive:!1,isInlineEditing:!1,effectsTimer:null,effectsTimerEnable:!1},e.data(t,"the7PostLoop",s),a={init:function(){i=new The7ElementorSettings(s),l=i.getWidgetType(),r=i.getSettings(),a.bindEvents(),s.refresh(),elementorFrontend.isEditMode()&&(a.handleCTA(),window.the7ApplyGeneralFilterHandlers(f.$filterCategories)),s.refresh=elementorFrontend.debounce(s.refresh,300)},initFilter:function(){let e=a.getFilterConfig();s.vars.filteradeActive?f.$gridContainer.The7SimpleFilterade("update",e):(f.$gridContainer.The7SimpleFilterade(e),s.vars.filteradeActive=!0)},getFilterConfig:function(){let e=the7ShortcodesFilterConfig(f.$filterContainer);return e.paginationMode=d.attr("data-pagination-mode"),e.pageLimit=d.attr("data-post-limit"),e.pageControls=d.children(".paginator, .paginator-more-button"),e.pagesToShow=d.hasClass("show-all-pages")?999:5,e.pagerClass="page-numbers filter-item",e.nodesSelector="> .wf-cell",e.usePaginationScroll="y"===r.pagination_scroll,e.scrollPagesOffset=r.pagination_scroll_offset?r.pagination_scroll_offset.size:0,e.infinityScroll=d.hasClass("lazy-loading-mode"),e},handleLoadingEffects:function(){s.vars.effectsTimerEnable?(clearTimeout(s.vars.effectsTimer),s.vars.effectsTimer=setTimeout((function(){a.processEffects(),elementorFrontend.elements.$window.on("scroll",a.handleLoadingEffects)}),500)):a.processEffects()},processEffects:function(){$elements=f.$gridContainer.children(".wf-cell:not(.shown):not(.is-visible)"),window.the7ProcessEffects($elements)},handleCTA:function(){if("undefined"===elementorPro)return;const e=document.querySelector(`[data-id="${i.getID()}"] .e-loop-empty-view__wrapper`);if(document.querySelector(`[data-id="${i.getID()}"] .e-loop-empty-view__wrapper_old`))return void s.css("opacity",1);if(!e)return;const t=e.attachShadow({mode:"open"});t.appendChild(elementorPro.modules.loopBuilder.getCtaStyles()),t.appendChild(elementorPro.modules.loopBuilder.getCtaContent(l));t.querySelector(".e-loop-empty-view__box-cta").addEventListener("click",(()=>{elementorPro.modules.loopBuilder.createTemplate(),a.handlePostEdit()})),s.css("opacity",1)},bindEvents:function(){elementorFrontend.elements.$window.on("scroll",a.handleLoadingEffects),elementorFrontend.elements.$window.on("the7-resize-width",a.handleResize),f.$gridContainer.on("beforeSwitchPage",a.onBeforeSwitchPage),f.$gridContainer.on("updateReady",a.onFilteradeUpdateReady)},unBindEvents:function(){elementorFrontend.elements.$window.off("scroll",a.handleLoadingEffects),elementorFrontend.elements.$window.off("the7-resize-width",a.handleResize),f.$gridContainer.off("updateReady",a.onFilteradeUpdateReady)},onBeforeSwitchPage:function(){elementorFrontend.elements.$window.off("scroll",a.handleLoadingEffects),s.vars.effectsTimerEnable=!0},onFilteradeUpdateReady:function(){a.handleLoadingEffects(),a.updateSimpleMasonry()},handleResize:function(){a.isMasonryEnabled()?s.vars.masonryActive?a.updateSimpleMasonry():(f.$gridContainer.The7SimpleMasonry(a.getMasonryConfig()),s.vars.masonryActive=!0):s.vars.masonryActive&&(f.$gridContainer.The7SimpleMasonry("destroy"),s.vars.masonryActive=!1)},updateSimpleMasonry(){s.vars.masonryActive&&f.$gridContainer.The7SimpleMasonry("setSettings",a.getMasonryConfig())},getMasonryConfig:function(){return{items:".wf-cell.visible",columnsCount:+The7ElementorSettings.getResponsiveControlValue(r,"columns","size")||0,verticalSpaceBetween:+The7ElementorSettings.getResponsiveControlValue(r,"rows_gap","size")||0}},isMasonryEnabled:function(){return!!r.layout},handlePostEdit(){s.vars.isInlineEditing=!0,s.addClass(o.inPlaceTemplateEditable)},updateOption:function(e){r[e]}},s.refresh=function(){r=i.getSettings(),a.initFilter(),a.handleResize()},s.delete=function(){a.unBindEvents(),s.removeData("the7PostLoop")},s.onDocumentLoaded=function(e){if("loop-item"===e.config.type){a.handlePostEdit();let t=[];const n=e.id;t=[...t,"style#loop-"+n,"link#font-loop-"+n,"style#loop-dynamic-"+n],t.forEach((e=>{s.find(e).remove()}))}},a.init()},e.fn.the7PostLoop=function(){return this.each((function(){var t=e(this).data("the7PostLoop");void 0!==t&&t.delete(),new e.the7PostLoop(this)}))},e(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/the7-post-loop.post",(function(e,t){t(document).ready((function(){e.the7PostLoop()}))})),elementorFrontend.isEditMode()&&(elementorEditorAddOnChangeHandler("the7-post-loop",(function(t,n){let o=["layout",...The7ElementorSettings.getResponsiveSettingList("columns"),...The7ElementorSettings.getResponsiveSettingList("rows_gap"),...The7ElementorSettings.getResponsiveSettingList("columns_gap"),"pagination_scroll_offset","pagination_scroll"];const i=t.model.get("name");if(-1!==o.indexOf(i)){const t=e(n.$el).data("the7PostLoop");void 0!==t&&t.refresh(i)}})),elementor.on("document:loaded",(function(t){e(".elementor-widget-the7-post-loop").each((function(){const n=e(this).data("the7PostLoop");void 0!==n&&n.onDocumentLoaded(t)}))})))}))}(jQuery);